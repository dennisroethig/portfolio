box: wercker/nodejs
# Build definition
build:
  # The steps that will be executed on build
  steps:

    - npm-install

    - script:
        name: install bower
        code: |
          sudo npm install -g bower
          bower install

    - npm-test

    - wercker/bundle-install@0.9.4

    - wercker/grunt@0.0.6:
        tasks: build

  after-steps:
    
      - wouter/email-notify:
          from: roethig.dennis@gmail.com
          to: roethig.dennis@gmail.com
          username: $EMAIL_USERNAME
          password: $EMAIL_PASSWORD
          host: smtp.gmail.com:587


deploy:

  steps:
    
    # - npm-install

    # - script:
    #     name: install bower
    #     code: |
    #       sudo npm install -g bower
    #       bower install

    - wercker/bundle-install@0.9.4

    - script:
        name: write env var
        code: |-
          echo {"ftpkey": {"username": $FTP_USERNAME, "password": $FTP_PASSWORD}} >> .ftppass
    
    - wercker/grunt@0.0.6:
        tasks: deploy
    
  after-steps:
    
      - wouter/email-notify:
          from: roethig.dennis@gmail.com
          to: roethig.dennis@gmail.com
          username: $EMAIL_USERNAME
          password: $EMAIL_PASSWORD
          host: smtp.gmail.com:587

